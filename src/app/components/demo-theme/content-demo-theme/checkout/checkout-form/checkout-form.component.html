<h2>Datos de envio</h2>
<section>


<form [formGroup]='createSalesOrderForm' (ngSubmit)='onSubmit()'>
  <input type="hidden" [hidden]="true" formControlName="Subtotal">
  <input type="hidden" [hidden]="true" formControlName="Taxes">
  <input type="hidden" [hidden]="true" formControlName="Total">
  <input type="hidden" [hidden]="true" formControlName="Payed">
  <input type="hidden" [hidden]="true" formControlName="Change" [ngModel]="0">
  <input type="hidden" [hidden]="true" formControlName="PaymentFormNum">
  <input type="hidden" [hidden]="true" formControlName="TotalDiscount" [ngModel]="0">

  <div class="row">
    <div class="col-md-6">
      <div class="form-group">
        <label for="PayPalFullName">*Nombre completo:</label>
        <input [readonly]='!this.showControls' type="text" formControlName='PayPalFullName'
          [ngModel]="salesOrderData.PayPalFullName" class="form-control small-form"
          [ngClass]="{ 'is-invalid': submitted && f.PayPalFullName.errors }" />
        <div class="invalid-feedback" *ngIf="submitted && f.PayPalFullName.errors">
          <div *ngIf="f.PayPalFullName.errors.required">Nombre completo es requerido</div>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="form-group">
        <label for="CustomerEmail">*Correo electrónico:</label>
        <input [readonly]='!this.showControls' type="text" formControlName='CustomerEmail'
          [ngModel]="salesOrderData.CustomerEmail" class="form-control small-form"
          [ngClass]="{ 'is-invalid': submitted && f.CustomerEmail.errors }" />
        <div class="invalid-feedback" *ngIf="submitted && f.CustomerEmail.errors">
          <div *ngIf="f.CustomerEmail.errors.required">Correo electrónico es requerido</div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
      <div class="col-md-4">
        <div class="form-group">
            <label for="PayPalAddressLine1">*Direccion</label>
            <input [readonly]='!this.showControls' type="text" formControlName="PayPalAddressLine1"
              [ngModel]="salesOrderData.PayPalAddressLine1" class="form-control small-form"
              [ngClass]="{ 'is-invalid': submitted && f.PayPalAddressLine1.errors }" />
            <div *ngIf="submitted && f.PayPalAddressLine1.errors" class="invalid-feedback">
              <div *ngIf="f.PayPalAddressLine1.errors.required">Direccion es requerida</div>
            </div>
          </div>
      </div>
      <div class="col-md-4">
        <div class="form-group">
            <label for="PayPalAddressLine2">*Colonia</label>
            <input [readonly]='!this.showControls' type="text" formControlName="PayPalAddressLine2"
              [ngModel]="salesOrderData.PayPalAddressLine2" class="form-control small-form"
              [ngClass]="{ 'is-invalid': submitted && f.PayPalAddressLine2.errors }" />
            <div *ngIf="submitted && f.PayPalAddressLine2.errors" class="invalid-feedback">
            </div>
          </div>
      </div>
      <div class="col-md-4">
        <div class="form-group">
            <label for="PayPalAdminArea2">*Ciudad</label>
            <input [readonly]='!this.showControls' type="text" formControlName="PayPalAdminArea2"
              [ngModel]="salesOrderData.PayPalAdminArea2" class="form-control small-form"
              [ngClass]="{ 'is-invalid': submitted && f.PayPalAdminArea2.errors }" />
            <div *ngIf="submitted && f.PayPalAdminArea2.errors" class="invalid-feedback">
              <div *ngIf="f.PayPalAdminArea2.errors.required">Ciudad es requerida</div>
            </div>
          </div>
      </div>
  </div>

  <div class="row">
      <div class="col-md-4">
        <div class="form-group">
            <label for="PayPalAdminArea1">*Estado</label>
            <ng-container *ngIf='!this.showControls'>
              <select disabled id="formSelectState" type="text" formControlName="PayPalAdminArea1"
                [ngModel]="salesOrderData.PayPalAdminArea1" class="form-control small-form"
                [ngClass]="{ 'is-invalid': submitted && f.PayPalAdminArea1.errors }">
                <option *ngFor="let item of statesList" [ngValue]="item.id">{{item.name}}</option>
              </select>
            </ng-container>
            <ng-container *ngIf='this.showControls'>
              <select id="formSelectState" type="text" formControlName="PayPalAdminArea1"
                [ngModel]="salesOrderData.PayPalAdminArea1" class="form-control small-form"
                [ngClass]="{ 'is-invalid': submitted && f.PayPalAdminArea1.errors }">
                <option *ngFor="let item of statesList" [ngValue]="item.id">{{item.name}}</option>
              </select>
            </ng-container>
            <div *ngIf="submitted && f.PayPalAdminArea1.errors" class="invalid-feedback">
              <div *ngIf="f.PayPalAdminArea1.errors.required">Estado es requerido</div>
            </div>
          </div>
      </div>
      <div class="col-md-4">        
          <div class="form-group">
              <label for="PayPalPostalCode">*Código Postal</label>
              <input [readonly]='!this.showControls' (change)="checkIfPostalCodeExist($event.target)" type="text" formControlName="PayPalPostalCode"
                [ngModel]="salesOrderData.PayPalPostalCode" class="form-control small-form"
                [ngClass]="{ 'is-invalid': submitted && f.PayPalPostalCode.errors }" />
              <div *ngIf="submitted && f.PayPalPostalCode.errors" class="invalid-feedback">
              </div>
              <div *ngIf="submitted && f.PayPalPostalCode.errors" class="invalid-feedback">
                <div *ngIf="f.PayPalPostalCode.errors.required">Código Postal es requerido</div>
              </div>
          </div>
      </div>
      <div class="col-md-4">
        <div class="form-group">
            <label for="PayPalCountryCode">*País</label>
            <ng-container *ngIf='!this.showControls'>
              <select disabled id="formSelectCountry" type="text" formControlName="PayPalCountryCode"
                [ngModel]="salesOrderData.PayPalCountryCode" class="form-control small-form"
                [ngClass]="{ 'is-invalid': submitted && f.PayPalCountryCode.errors }">
                <option *ngFor="let item of countryList" [ngValue]="item.id">{{item.name}}</option>
              </select>
            </ng-container>
            <ng-container *ngIf='this.showControls'>
              <select id="formSelectCountry" type="text" formControlName="PayPalCountryCode"
                [ngModel]="salesOrderData.PayPalCountryCode" class="form-control small-form"
                [ngClass]="{ 'is-invalid': submitted && f.PayPalCountryCode.errors }">
                <option *ngFor="let item of countryList" [ngValue]="item.id">{{item.name}}</option>
              </select>
            </ng-container>
            <div *ngIf="submitted && f.PayPalCountryCode.errors" class="invalid-feedback">
              <div *ngIf="f.PayPalCountryCode.errors.required">Pais es requerido</div>
            </div>
          </div>
      </div>
  </div>

  <div class="row justify-content-end ">
      <div class="col-md-2">
        <div class="form-group">
            <button *ngIf="this.showControls" [disabled]="loading" class="btn btn-primary">
              <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
              Continuar
            </button>
          </div>
      </div>
  </div>  
</form>